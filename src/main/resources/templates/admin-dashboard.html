<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{admin-dashboard-layout}"
>
<head>
    <meta charset="UTF-8">
    <title>Admin Dashboard - Home</title>
</head>
<body>
<section layout:fragment="section">
    <div class="section-main-container">
        <div class="section-main-header">
            <h2 class="welcome-text">Welcome, <span th:text="${#authentication.principal.name}"></span></h2>
            <p class="current-date"><svg xmlns="http://www.w3.org/2000/svg" width="1.35em" height="1.35em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-calendar-days-icon lucide-calendar-days"><path d="M8 2v4"/><path d="M16 2v4"/><rect width="18" height="18" x="3" y="4" rx="2"/><path d="M3 10h18"/><path d="M8 14h.01"/><path d="M12 14h.01"/><path d="M16 14h.01"/><path d="M8 18h.01"/><path d="M12 18h.01"/><path d="M16 18h.01"/></svg><span id="date"></span></p>
            <script>
                const formattedDate = new Date().toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });
                document.getElementById('date').textContent = formattedDate;
            </script>
        </div>
        <div class="section-overview-container" >
            <div class="section-overview">
                <div class="overview-item products">
                    <div>
                        <h2>Products</h2>
                        <h1 th:text="${productsCount}">0</h1>
                    </div>
                    <div class="overview-svg">
                        <svg xmlns="http://www.w3.org/2000/svg" height="80px" viewBox="0 -960 960 960" width="80px" fill="currentColor"><path d="M200-80q-33 0-56.5-23.5T120-160v-480q0-33 23.5-56.5T200-720h80q0-83 58.5-141.5T480-920q83 0 141.5 58.5T680-720h80q33 0 56.5 23.5T840-640v480q0 33-23.5 56.5T760-80H200Zm0-80h560v-480H200v480Zm280-240q83 0 141.5-58.5T680-600h-80q0 50-35 85t-85 35q-50 0-85-35t-35-85h-80q0 83 58.5 141.5T480-400ZM360-720h240q0-50-35-85t-85-35q-50 0-85 35t-35 85ZM200-160v-480 480Z"/></svg>
                    </div>
                </div>
                <div class="overview-item orders">
                    <div>
                        <h2>Orders</h2>
                        <h1 th:text="${ordersCount}">0</h1>
                    </div>
                    <div class="overview-svg">
                        <svg xmlns="http://www.w3.org/2000/svg" width="80px" height="80px" viewBox="0 0 24 24" fill="none"  stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clock-arrow-down-icon lucide-clock-arrow-down"><path d="M12 6v6l2 1"/><path d="M12.337 21.994a10 10 0 1 1 9.588-8.767"/><path d="m14 18 4 4 4-4"/><path d="M18 14v8"/></svg>
                    </div>
                </div>
                <div class="overview-item users">
                    <div>
                        <h2>Users</h2>
                        <h1 th:text="${usersCount}">0</h1>
                    </div>
                    <div class="overview-svg">
                        <svg xmlns="http://www.w3.org/2000/svg"  width="80px" height="80px" viewBox="0 0 24 24" fill="none"  stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-users-round-icon lucide-users-round"><path d="M18 21a8 8 0 0 0-16 0"/><circle cx="10" cy="8" r="5"/><path d="M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3"/></svg>
                    </div>
                </div>
            </div>
        </div>
        <div class="section-summarytable-container">
            <div class="top-tables">
                <div>
                    <h2 class="table-name">Top Products</h2>
                    <div class="table-container">
                        <table>
                            <thead>
                            <tr>
                                <th>#</th>
                                <th>Product</th>
                                <th>Price</th>
                                <th>Stock</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr th:each="product, iterStat : ${topProducts}">
                                <td th:text="${iterStat.count}">1</td>
                                <td>
                                    <div class="product-name-image">
                                <span class="product-image-span">
                                    <img class="image-inspan" th:src="${product.imageUrl}" th:alt="${product.title}">
                                </span>
                                        <p th:text="${product.title}">Product Title</p>
                                    </div>
                                </td>
                                <td th:text="'₨' + ${#numbers.formatDecimal(product.price, 1, 2)}">₨21,777.38</td>
                                <td th:text="${product.quantity}">12</td>
                            </tr>
                            </tbody>
                        </table>
                        <div th:if="${#lists.size(topProducts) == 5}">
                            <a th:href="@{/admin/dashboard/products}" class="view-more">View more</a>
                        </div>
                    </div>
                </div>
                <div>
                    <h2 class="table-name">Recent Orders</h2>
                    <div class="table-container">
                        <table>
                            <thead>
                            <tr>
                                <th>#</th>
                                <th>Customer</th>
                                <th>Date Ordered</th>
                                <th>Total</th>
                                <th>Status</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr th:each="order, iterStat : ${recentOrders}">
                                <td th:text="${iterStat.count}">1</td>
                                <td th:text="${order.customerName}">Muhammad Hassam</td>
                                <td th:text="${#temporals.format(order.orderDate, 'dd/MM/yyyy')}">1/11/2025</td>
                                <td th:text="'₨' + ${#numbers.formatDecimal(order.total, 1, 2)}">₨21,777.38</td>
                                <td>
                    <span class="status-badge"
                          th:classappend="${order.status.name()}"
                          th:text="${order.status}">
                        PENDING
                    </span>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                        <div th:if="${#lists.size(recentOrders) == 5}">
                            <a th:href="@{/admin/dashboard/orders}" class="view-more">View more</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
</body>
</html>